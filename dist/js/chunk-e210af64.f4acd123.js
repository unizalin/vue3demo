(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e210af64"],{3690:function(e,t,c){"use strict";var a=c("be92");t["a"]=Object(a["b"])("statusStore",{state:function(){return{isLoading:!1,cartLoadingItem:"",messages:[]}},actions:{pushMessage:function(e){console.log("pushMessage",e);var t=e.title,c=e.content,a=e.style,o=void 0===a?"success":a;this.messages.push({style:o,title:t,content:c})}}})},"76db":function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),o={class:"container"},l={class:"col"},n={class:"sticky-top"},r={class:"table align-middle"},s=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th"),Object(a["createElementVNode"])("th",null,"品名"),Object(a["createElementVNode"])("th",{style:{width:"110px"}},"數量"),Object(a["createElementVNode"])("th",null,"單價")])],-1),d=["disabled","onClick"],i=Object(a["createElementVNode"])("i",{class:"bi bi-x"},null,-1),m=[i],u={key:0,class:"text-success"},b={class:"input-group input-group-sm"},O=["onUpdate:modelValue","onChange","disabled"],j={class:"input-group-text"},p={class:"text-end"},V={key:0,class:"text-success"},f=Object(a["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),N={class:"text-end"},E={key:0},v=Object(a["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),h={class:"text-end text-success"},g={class:"input-group mb-3 input-group-sm"},y={class:"input-group-append"},C={class:"my-5 row justify-content-center"},k={class:"mb-3"},x=Object(a["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),w={class:"mb-3"},B=Object(a["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),S={class:"mb-3"},L=Object(a["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),_={class:"mb-3"},D=Object(a["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),I={class:"mb-3"},U=Object(a["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),q=Object(a["createElementVNode"])("div",{class:"text-end"},[Object(a["createElementVNode"])("button",{class:"btn btn-danger"},"送出訂單")],-1);function z(e,t,c,i,z,M){var T=this,$=Object(a["resolveComponent"])("Loading"),F=Object(a["resolveComponent"])("Field"),J=Object(a["resolveComponent"])("ErrorMessage"),X=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])($,{active:e.isLoading},null,8,["active"]),Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("table",r,[s,Object(a["createElementVNode"])("tbody",null,[e.cart.carts?(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(e.cart.carts,(function(t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t.id},[Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:e.cartLoadingItem===t.id,onClick:function(c){return e.removeCartItem(t.id)}},m,8,d)]),Object(a["createElementVNode"])("td",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",u," 已套用優惠券 ")):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",b,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(c){return e.updateCart(t)},disabled:T.cartLoadingItem===t.id},null,40,O),[[a["vModelText"],t.qty,void 0,{number:!0}]]),Object(a["createElementVNode"])("div",j,"/ "+Object(a["toDisplayString"])(t.product.unit),1)])]),Object(a["createElementVNode"])("td",p,[e.cart.final_total!==e.cart.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("small",V,"折扣價：")):Object(a["createCommentVNode"])("",!0),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$filters.currency(t.final_total)),1)])])})),128)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("tfoot",null,[Object(a["createElementVNode"])("tr",null,[f,Object(a["createElementVNode"])("td",N,Object(a["toDisplayString"])(e.$filters.currency(e.cart.total)),1)]),e.cart.final_total!==e.cart.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",E,[v,Object(a["createElementVNode"])("td",h,Object(a["toDisplayString"])(e.$filters.currency(e.cart.final_total)),1)])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",g,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(e){return z.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[a["vModelText"],z.coupon_code]]),Object(a["createElementVNode"])("div",y,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=function(){return M.addCouponCode&&M.addCouponCode.apply(M,arguments)})}," 套用優惠碼 ")])])])]),Object(a["createElementVNode"])("div",C,[Object(a["createVNode"])(X,{class:"col-md-6",onSubmit:M.createOrder},{default:Object(a["withCtx"])((function(e){var c=e.errors;return[Object(a["createElementVNode"])("div",k,[x,Object(a["createVNode"])(F,{id:"email",name:"email",type:"email",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:z.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return z.form.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(J,{name:"email",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",w,[B,Object(a["createVNode"])(F,{id:"name",name:"姓名",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:z.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return z.form.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(J,{name:"姓名",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",S,[L,Object(a["createVNode"])(F,{id:"tel",name:"電話",type:"tel",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:z.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return z.form.user.tel=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(J,{name:"電話",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",_,[D,Object(a["createVNode"])(F,{id:"address",name:"地址",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:z.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return z.form.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(J,{name:"地址",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",I,[U,Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[6]||(t[6]=function(e){return z.form.message=e})},null,512),[[a["vModelText"],z.form.message]])]),q]})),_:1},8,["onSubmit"])])])],64)}var M=c("5530"),T=(c("99af"),c("be92")),$=c("3690"),F=c("7342"),J={data:function(){return{coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:Object(M["a"])(Object(M["a"])({},Object(T["d"])($["a"],["isLoading","cartLoadingItem"])),Object(T["d"])(F["a"],["cart"])),methods:Object(M["a"])(Object(M["a"])({},Object(T["c"])(F["a"],["addCart","getCart","updateCart","removeCartItem"])),{},{addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/coupon");this.isLoading=!0;var c={code:this.coupon_code};this.$http.post(t,{data:c}).then((function(t){e.isLoading=!1,console.log(t),e.getCart()}))},createOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/order"),c=this.form;this.$http.post(t,{data:c}).then((function(t){var c=t.data.orderId;e.$router.push("/user/checkout/".concat(c))}))}}),created:function(){this.getCart()}},X=c("d959"),A=c.n(X);const G=A()(J,[["render",z]]);t["default"]=G},b0c0:function(e,t,c){var a=c("83ab"),o=c("5e77").EXISTS,l=c("e330"),n=c("9bf2").f,r=Function.prototype,s=l(r.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=l(d.exec),m="name";a&&!o&&n(r,m,{configurable:!0,get:function(){try{return i(d,s(this))[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-e210af64.f4acd123.js.map