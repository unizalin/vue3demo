(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5961e01a"],{"459d":function(e,t,o){"use strict";var c=o("7a23"),a={class:"toast-container position-absolute pe-3 top-0 end-0"};function n(e,t,o,n,s,r){var l=Object(c["resolveComponent"])("Toast");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n.messages,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:t,msg:e},null,8,["msg"])})),128))])}var s=o("be92"),r={class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true",ref:"toast"},l={class:"toast-header"},i={class:"me-auto"},d=Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"},null,-1),u={key:0,class:"toast-body"};function m(e,t,o,a,n,s){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",r,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["bg-".concat(o.msg.style),"p-2 rounded me-2 d-inline-block"])},null,2),Object(c["createElementVNode"])("strong",i,Object(c["toDisplayString"])(o.msg.title),1),d]),o.msg.content?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",u,Object(c["toDisplayString"])(o.msg.content),1)):Object(c["createCommentVNode"])("",!0)],512)}var b=o("6ea1"),p=o.n(b),h={name:"Toast",props:["msg"],mounted:function(){var e=this.$refs.toast,t=new p.a(e,{delay:5e3});t.show()}},j=o("d959"),O=o.n(j);const f=O()(h,[["render",m]]);var g=f,v=o("3690"),V={components:{Toast:g},setup:function(){var e=Object(v["a"])(),t=Object(s["e"])(e),o=t.messages;return{messages:o}}};const E=O()(V,[["render",n]]);t["a"]=E},"6ea1":function(e,t,o){
/*!
  * Bootstrap toast.js v5.0.2 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(t,c){e.exports=c(o("6a95"),o("109e"),o("302d"))})(0,(function(e,t,o){"use strict";function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var a=c(e),n=c(t),s=c(o);const r=e=>null===e||void 0===e?""+e:{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),l=e=>!(!e||"object"!==typeof e)&&("undefined"!==typeof e.jquery&&(e=e[0]),"undefined"!==typeof e.nodeType),i=(e,t,o)=>{Object.keys(o).forEach(c=>{const a=o[c],n=t[c],s=n&&l(n)?"element":r(n);if(!new RegExp(a).test(s))throw new TypeError(`${e.toUpperCase()}: Option "${c}" provided type "${s}" but expected type "${a}".`)})},d=e=>e.offsetHeight,u=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},m=[],b=e=>{"loading"===document.readyState?(m.length||document.addEventListener("DOMContentLoaded",()=>{m.forEach(e=>e())}),m.push(e)):e()},p=e=>{b(()=>{const t=u();if(t){const o=e.NAME,c=t.fn[o];t.fn[o]=e.jQueryInterface,t.fn[o].Constructor=e,t.fn[o].noConflict=()=>(t.fn[o]=c,e.jQueryInterface)}})},h="toast",j="bs.toast",O="."+j,f="click.dismiss"+O,g="mouseover"+O,v="mouseout"+O,V="focusin"+O,E="focusout"+O,N="hide"+O,y="hidden"+O,_="show"+O,k="shown"+O,C="fade",L="hide",x="show",w="showing",B={animation:"boolean",autohide:"boolean",delay:"number"},I={animation:!0,autohide:!0,delay:5e3},S='[data-bs-dismiss="toast"]';class T extends s["default"]{constructor(e,t){super(e),this._config=this._getConfig(t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return B}static get Default(){return I}static get NAME(){return h}show(){const e=a["default"].trigger(this._element,_);if(e.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(C);const t=()=>{this._element.classList.remove(w),this._element.classList.add(x),a["default"].trigger(this._element,k),this._maybeScheduleHide()};this._element.classList.remove(L),d(this._element),this._element.classList.add(w),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this._element.classList.contains(x))return;const e=a["default"].trigger(this._element,N);if(e.defaultPrevented)return;const t=()=>{this._element.classList.add(L),a["default"].trigger(this._element,y)};this._element.classList.remove(x),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains(x)&&this._element.classList.remove(x),super.dispose()}_getConfig(e){return e={...I,...n["default"].getDataAttributes(this._element),..."object"===typeof e&&e?e:{}},i(h,e,this.constructor.DefaultType),e}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t;break}if(t)return void this._clearTimeout();const o=e.relatedTarget;this._element===o||this._element.contains(o)||this._maybeScheduleHide()}_setListeners(){a["default"].on(this._element,f,S,()=>this.hide()),a["default"].on(this._element,g,e=>this._onInteraction(e,!0)),a["default"].on(this._element,v,e=>this._onInteraction(e,!1)),a["default"].on(this._element,V,e=>this._onInteraction(e,!0)),a["default"].on(this._element,E,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=T.getOrCreateInstance(this,e);if("string"===typeof e){if("undefined"===typeof t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}return p(T),T}))},"76db":function(e,t,o){"use strict";o.r(t);o("b0c0");var c=o("7a23"),a={class:"container"},n={class:"row"},s={class:"col-md 7"},r={class:"row"},l=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"圖片"),Object(c["createElementVNode"])("th",null,"商品名稱"),Object(c["createElementVNode"])("th",null,"價格"),Object(c["createElementVNode"])("th")])],-1),i={style:{width:"200px"}},d={href:"#",class:"text-dark"},u={key:0,class:"h5"},m={key:1,class:"h6"},b={key:2,class:"h5"},p={class:"btn-group btn-group-sm"},h=["onClick"],j=["onClick","disabled"],O=Object(c["createTextVNode"])(" 加到購物車 "),f={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},g=Object(c["createElementVNode"])("span",{class:"visually-hidden"},"Loading...",-1),v=[g],V={class:"col-md-5"},E={class:"sticky-top"},N={class:"table align-middle"},y=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th"),Object(c["createElementVNode"])("th",null,"品名"),Object(c["createElementVNode"])("th",{style:{width:"110px"}},"數量"),Object(c["createElementVNode"])("th",null,"單價")])],-1),_=["disabled","onClick"],k=Object(c["createElementVNode"])("i",{class:"bi bi-x"},null,-1),C=[k],L={key:0,class:"text-success"},x={class:"input-group input-group-sm"},w=["onUpdate:modelValue","onChange","disabled"],B={class:"input-group-text"},I={class:"text-end"},S={key:0,class:"text-success"},T=Object(c["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),P={class:"text-end"},D={key:0},z=Object(c["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),M={class:"text-end text-success"},q={class:"input-group mb-3 input-group-sm"},$={class:"input-group-append"},U={class:"my-5 row justify-content-center"},F={class:"mb-3"},A=Object(c["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),H={class:"mb-3"},Q=Object(c["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),K={class:"mb-3"},J=Object(c["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),R={class:"mb-3"},X=Object(c["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),G={class:"mb-3"},W=Object(c["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),Y=Object(c["createElementVNode"])("div",{class:"text-end"},[Object(c["createElementVNode"])("button",{class:"btn btn-danger"},"送出訂單")],-1);function Z(e,t,o,g,k,Z){var ee=this,te=Object(c["resolveComponent"])("Loading"),oe=Object(c["resolveComponent"])("ToastMessages"),ce=Object(c["resolveComponent"])("Field"),ae=Object(c["resolveComponent"])("ErrorMessage"),ne=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(te,{active:e.isLoading},null,8,["active"]),Object(c["createVNode"])(oe),Object(c["createElementVNode"])("div",a,[Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("table",null,[l,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.sortProducts,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t.id},[Object(c["createElementVNode"])("td",i,[Object(c["createElementVNode"])("div",{style:Object(c["normalizeStyle"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(t.imageUrl,")")}])},null,4)]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("a",d,Object(c["toDisplayString"])(t.title),1)]),Object(c["createElementVNode"])("td",null,[t.price?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",u,Object(c["toDisplayString"])(t.origin_price)+" 元",1)),t.price?(Object(c["openBlock"])(),Object(c["createElementBlock"])("del",m,"原價 "+Object(c["toDisplayString"])(t.origin_price)+" 元",1)):Object(c["createCommentVNode"])("",!0),t.price?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",b,"現在只要 "+Object(c["toDisplayString"])(t.price)+" 元",1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(o){return e.getProduct(t.id)}}," 查看更多 ",8,h),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(o){return e.addCart(t.id)},disabled:ee.cartLoadingItem===t.id},[O,ee.cartLoadingItem===t.id?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",f,v)):Object(c["createCommentVNode"])("",!0)],8,j)])])])})),128))])])])]),Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("table",N,[y,Object(c["createElementVNode"])("tbody",null,[e.cart.carts?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(e.cart.carts,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t.id},[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:e.cartLoadingItem===t.id,onClick:function(o){return e.removeCartItem(t.id)}},C,8,_)]),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",L," 已套用優惠券 ")):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",x,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(o){return e.updateCart(t)},disabled:ee.cartLoadingItem===t.id},null,40,w),[[c["vModelText"],t.qty,void 0,{number:!0}]]),Object(c["createElementVNode"])("div",B,"/ "+Object(c["toDisplayString"])(t.product.unit),1)])]),Object(c["createElementVNode"])("td",I,[e.cart.final_total!==e.cart.total?(Object(c["openBlock"])(),Object(c["createElementBlock"])("small",S,"折扣價：")):Object(c["createCommentVNode"])("",!0),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.$filters.currency(t.final_total)),1)])])})),128)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("tfoot",null,[Object(c["createElementVNode"])("tr",null,[T,Object(c["createElementVNode"])("td",P,Object(c["toDisplayString"])(e.$filters.currency(e.cart.total)),1)]),e.cart.final_total!==e.cart.total?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",D,[z,Object(c["createElementVNode"])("td",M,Object(c["toDisplayString"])(e.$filters.currency(e.cart.final_total)),1)])):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",q,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(e){return k.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[c["vModelText"],k.coupon_code]]),Object(c["createElementVNode"])("div",$,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=function(){return Z.addCouponCode&&Z.addCouponCode.apply(Z,arguments)})}," 套用優惠碼 ")])])])])]),Object(c["createElementVNode"])("div",U,[Object(c["createVNode"])(ne,{class:"col-md-6",onSubmitPassive:Z.createOrder},{default:Object(c["withCtx"])((function(e){var o=e.errors;return[Object(c["createElementVNode"])("div",F,[A,Object(c["createVNode"])(ce,{id:"email",name:"email",type:"email",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":o["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:k.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return k.form.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(ae,{name:"email",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",H,[Q,Object(c["createVNode"])(ce,{id:"name",name:"姓名",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":o["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:k.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return k.form.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(ae,{name:"姓名",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",K,[J,Object(c["createVNode"])(ce,{id:"tel",name:"電話",type:"tel",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":o["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:k.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return k.form.user.tel=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(ae,{name:"電話",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",R,[X,Object(c["createVNode"])(ce,{id:"address",name:"地址",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":o["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:k.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return k.form.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(ae,{name:"地址",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",G,[W,Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[6]||(t[6]=function(e){return k.form.message=e})},null,512),[[c["vModelText"],k.form.message]])]),Y]})),_:1},8,["onSubmitPassive"])])])],64)}var ee=o("5530"),te=(o("99af"),o("be92")),oe=o("e289"),ce=o("3690"),ae=(o("4e82"),o("bc3a")),ne=o.n(ae),se=Object(ce["a"])(),re=Object(te["b"])("cartStore",{state:function(){return{cart:{}}},getters:{sortProducts:function(e){return e.products.sort((function(e,t){return e.price-t.price}))}},actions:{addCart:function(e){var t=this,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/cart");se.cartLoadingItem=e;var c={product_id:e,qty:1};ne.a.post(o,{data:c}).then((function(e){se.cartLoadingItem="",console.log("res",e),se.pushMessage({title:"加入購物車"}),t.getCart()}))},getCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/cart");ne.a.get(t).then((function(t){se.cartLoadingItem="",e.cart=t.data.data,console.log("getCart",t)}))},updateCart:function(e){var t=this,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/cart/").concat(e.id);this.isLoading=!0,se.cartLoadingItem=e.id,console.log("updateCart",e.id,e.product_id);var c={product_id:e.product_id,qty:e.qty};ne.a.put(o,{data:c}).then((function(e){console.log(e),se.cartLoadingItem="",t.getCart(),t.isLoading=!1}))},removeCartItem:function(e){var t=this;se.cartLoadingItem=e;var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/cart/").concat(e);this.isLoading=!0,ne.a.delete(o).then((function(e){se.pushMessage({title:"移除購物車品項"}),se.cartLoadingItem="",t.getCart(),t.isLoading=!1}))}}}),le=o("459d"),ie={data:function(){return{coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{ToastMessages:le["a"]},computed:Object(ee["a"])(Object(ee["a"])(Object(ee["a"])({},Object(te["d"])(oe["a"],["sortProducts"])),Object(te["d"])(ce["a"],["isLoading","cartLoadingItem"])),Object(te["d"])(re,["cart"])),methods:Object(ee["a"])(Object(ee["a"])(Object(ee["a"])({},Object(te["c"])(oe["a"],["getProducts"])),Object(te["c"])(re,["addCart","getCart","updateCart","removeCartItem"])),{},{addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/coupon");this.isLoading=!0;var o={code:this.coupon_code};this.$http.post(t,{data:o}).then((function(t){e.isLoading=!1,console.log(t),e.getCart()}))},createOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/order"),o=this.form;this.$http.post(t,{data:o}).then((function(t){console.log(t);var o=t.data.orderId;e.$router.push("/user/checkout/".concat(o))}))}}),created:function(){this.getProducts(),this.getCart()}},de=o("d959"),ue=o.n(de);const me=ue()(ie,[["render",Z]]);t["default"]=me},b0c0:function(e,t,o){var c=o("83ab"),a=o("5e77").EXISTS,n=o("e330"),s=o("9bf2").f,r=Function.prototype,l=n(r.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=n(i.exec),u="name";c&&!a&&s(r,u,{configurable:!0,get:function(){try{return d(i,l(this))[1]}catch(e){return""}}})},e289:function(e,t,o){"use strict";o("4e82"),o("99af"),o("a15b");var c=o("bc3a"),a=o.n(c),n=o("be92"),s=o("3690"),r=Object(s["a"])();t["a"]=Object(n["b"])("productStore",{state:function(){return{products:[],productsPage:[],pagination:{}}},getters:{sortProducts:function(e){return e.products.sort((function(e,t){return e.price-t.price}))}},actions:{getProducts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/products/all");r.isLoading=!0,console.log(r),a.a.get(t).then((function(t){t.data.success&&(console.log("actions getProducts",t.data),e.products=t.data.products,e.pagination=t.data.pagination,r.isLoading=!1)}))},getProductPage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/admin/products?page=").concat(t);r.isLoading=!0,a.a.get(o).then((function(t){t.data.success&&(console.log("getProductPage",t.data),e.productsPage=t.data.products,e.pagination=t.data.pagination,r.isLoading=!1)}))},updateProduct:function(e){var t=this;console.log(e),this.tempProduct=e;var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/admin/product"),c="post";this.isNew||(o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("unizatest","/admin/product/").concat(e.id),c="put");var n=this.$refs.productModal;r.isLoading=!0,a.a[c](o,{data:this.tempProduct}).then((function(e){console.log(e),n.hideModal(),e.data.success?(console.log("success true"),t.getProducts(),t.emitter.emit("push-message",{style:"success",title:"更新成功"})):t.emitter.emit("push-message",{style:"danger",title:"更新失敗",content:e.data.message.join("、")}),r.isLoading=!1}))}}})}}]);
//# sourceMappingURL=chunk-5961e01a.02b5317b.js.map